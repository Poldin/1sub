---
title: "API Overview"
description: "1Sub API for credit consumption - Magic Login requires zero API calls"
---

# API Overview

With 1Sub's Magic Login system, **authentication requires zero API calls**. You verify signed URLs locally using your Magic Login Secret.

The only time you need to call the 1Sub API is for **credit consumption** (if your tool uses credits).

## Architecture Summary

| Function | Implementation |
|----------|----------------|
| User Authentication | **Local verification** - Magic Login signed URLs |
| Subscription Data | **Webhooks** - pushed to your endpoint |
| Credit Consumption | **API call** - `POST /credits/consume` |

---

## Base URL

```
https://1sub.io/api/v1
```

## Authentication

For the Credits API, include your API key in every request:

```http
Authorization: Bearer sk-tool-xxxxxxxxxxxxxxxxxxxxxxxx
```

<Note>
Magic Login does NOT use API keys. It uses your Magic Login Secret to verify signatures locally.
</Note>

---

## API Endpoints

| Endpoint | Purpose |
|----------|---------|
| `POST /credits/consume` | Deduct credits from user balance |

That's it. One endpoint for tools that use credits. If your tool doesn't use credits, you don't need to make any API calls.

---

## Quick Example: Consume Credits

```typescript
const response = await fetch('https://1sub.io/api/v1/credits/consume', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${API_KEY}`,
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    user_id: oneSubUserId,  // From webhook or Magic Login
    amount: 10,
    reason: 'Generated 1 AI image',
    idempotency_key: `img-${userId}-${Date.now()}`
  }),
});

const { success, new_balance } = await response.json();
```

---

## Response Format

Successful responses return JSON:

```json
{
  "success": true,
  "new_balance": 90,
  "transaction_id": "txn-abc123def456"
}
```

Error responses include an error message:

```json
{
  "error": "Error type",
  "message": "Human-readable description"
}
```

---

## Rate Limits

| Endpoint | Limit |
|----------|-------|
| `/credits/consume` | 100/min |

If you hit a rate limit, you'll get a `429` response. Wait and retry.

---

## Status Codes

| Code | Meaning |
|------|---------|
| 200 | Success |
| 400 | Invalid request |
| 401 | Invalid API key |
| 402 | Insufficient credits |
| 403 | Access denied |
| 429 | Rate limit exceeded |
| 500 | Server error |

<CardGroup cols={2}>
<Card title="Full API Reference" icon="code" href="/docs/api/reference">
  Complete Credits API documentation
</Card>

<Card title="Magic Login" icon="sparkles" href="/docs/api/magic-login">
  Zero-API-call authentication
</Card>
</CardGroup>
