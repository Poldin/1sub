---
title: "Common Errors"
description: "Solutions to common integration issues"
---

# Common Errors

Quick solutions to common issues when integrating with 1Sub.

## Authentication Errors

<AccordionGroup>
<Accordion title="Invalid API key (401)">
**Error:**
```json
{
  "error": "Unauthorized",
  "message": "Invalid API key"
}
```

**Causes:**
- Wrong API key
- Missing `Bearer` prefix
- Extra spaces or characters

**Solution:**
1. Verify API key in your environment variables
2. Check format: `Authorization: Bearer sk-tool-xxxxx`
3. Ensure no trailing spaces in `.env` file
4. Regenerate key from vendor dashboard if needed
</Accordion>

<Accordion title="Tool is inactive (403)">
**Error:**
```json
{
  "error": "Forbidden",
  "message": "Tool is inactive"
}
```

**Solution:**
- Ensure tool is published in vendor dashboard
- Contact support if tool was suspended
</Accordion>
</AccordionGroup>

## Callback Errors

<AccordionGroup>
<Accordion title="Invalid or expired code">
**Error:**
```json
{
  "error": "Invalid code",
  "message": "Authorization code is invalid or expired"
}
```

**Causes:**
- Code older than 60 seconds
- Code already used (single-use)
- Typo in code

**Solution:**
- Codes expire after 60 seconds - user needs to click "Launch Tool" again
- Each code can only be used once
- Check the code is passed correctly from the URL parameter
</Accordion>

<Accordion title="Redirect URI mismatch">
**Error:**
```json
{
  "error": "Invalid redirect URI"
}
```

**Solution:**
Ensure the callback URL in your code matches exactly what's configured in the vendor dashboard (including protocol, trailing slashes, etc.)
</Accordion>
</AccordionGroup>

## Verification Errors

<AccordionGroup>
<Accordion title="Access revoked">
**Error:**
```json
{
  "valid": false,
  "error": "ACCESS_REVOKED",
  "reason": "subscription_cancelled"
}
```

**Cause:** User's subscription ended (cancelled, payment failed, etc.)

**Solution:**
End the user's session and redirect them to re-subscribe:
```typescript
if (!result.valid) {
  req.session.destroy();
  res.redirect('/?error=subscription_ended');
}
```
</Accordion>

<Accordion title="Token expired">
**Error:**
```json
{
  "valid": false,
  "error": "TOKEN_EXPIRED"
}
```

**Cause:** Verification token expired (24 hours)

**Solution:**
Have the user click "Launch Tool" again to get a fresh token.
</Accordion>
</AccordionGroup>

## Credit Errors

<AccordionGroup>
<Accordion title="Insufficient credits">
**Error:**
```json
{
  "error": "Insufficient credits",
  "current_balance": 5,
  "required": 10
}
```

**Solution:**
Show user they need to buy more credits:
```typescript
if (error.response?.status === 400) {
  showError('You need more credits to continue', {
    action: { label: 'Buy Credits', url: 'https://1sub.io/credits' }
  });
}
```
</Accordion>
</AccordionGroup>

## Webhook Errors

<AccordionGroup>
<Accordion title="Invalid signature">
**Cause:** Webhook signature verification failed

**Common fixes:**
1. Use raw body (not parsed JSON) for verification
2. Verify webhook secret is correct
3. Check timestamp isn't too old (>5 minutes)

```typescript
// Use raw body
app.post('/webhooks/1sub',
  express.raw({ type: 'application/json' }),
  (req, res) => {
    const payload = req.body.toString(); // Raw bytes
    // Verify signature...
  }
);
```
</Accordion>

<Accordion title="Webhooks not received">
**Common fixes:**
1. Check webhook URL in vendor dashboard
2. Verify endpoint is publicly accessible
3. Use ngrok for local development
4. Ensure HTTPS (HTTP is rejected)
</Accordion>
</AccordionGroup>

## Rate Limits

<AccordionGroup>
<Accordion title="Rate limit exceeded (429)">
**Error:**
```json
{
  "error": "Rate limit exceeded",
  "retryAfter": 60
}
```

**Solution:**
1. Cache subscription status locally
2. Respect the `Retry-After` header
3. Use webhooks to invalidate cache instead of polling

```typescript
if (error.response?.status === 429) {
  const retryAfter = error.response.headers['retry-after'];
  await sleep(retryAfter * 1000);
  return retry();
}
```
</Accordion>
</AccordionGroup>

## Getting Help

<CardGroup cols={2}>
<Card title="Email Support" icon="envelope">
  support@1sub.io
</Card>

<Card title="Check Status" icon="signal">
  https://status.1sub.io
</Card>
</CardGroup>

When contacting support, include:
- Error message and status code
- Request/response logs (redact API keys!)
- Steps to reproduce
