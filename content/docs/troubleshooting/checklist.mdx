---
title: "Integration Checklist"
description: "Quick checklist before going live"
---

# Integration Checklist

Make sure everything works before launch.

---

## Setup

- [ ] API key saved in environment variables
- [ ] Webhook secret saved in environment variables
- [ ] Callback URL configured in vendor dashboard
- [ ] Webhook URL configured in vendor dashboard (if using webhooks)

---

## Callback Endpoint

- [ ] Receives `code` parameter from 1Sub redirect
- [ ] Exchanges code for verification token
- [ ] Creates user session with `onesubUserId` and `verificationToken`
- [ ] Handles errors gracefully (invalid/expired codes)

Test it:
1. Click "Launch Tool" on your 1Sub tool page
2. Verify you land on your callback URL
3. Check that a session is created

---

## Access Check

- [ ] Middleware checks access every 5 minutes
- [ ] Calls `/verify` endpoint with current token
- [ ] Updates session with new token (tokens change on each call)
- [ ] Ends session when access is revoked

Test it:
1. Access a protected route - should succeed
2. Wait 5+ minutes - should trigger verification
3. Cancel subscription - access should be revoked

---

## Webhooks (if using)

- [ ] Endpoint receives POST requests
- [ ] Handles `subscription.canceled` by ending sessions
- [ ] Returns 200 quickly
- [ ] Signature verification (optional but recommended)

Test it:
1. Use ngrok to expose your local endpoint
2. Configure webhook URL in vendor dashboard
3. Trigger an event (cancel a subscription)
4. Check your logs

---

## Security

- [ ] API key is server-side only (never in frontend code)
- [ ] HTTPS enabled on all endpoints
- [ ] Environment variables not committed to git

---

## Ready to Launch

- [ ] All checklist items completed
- [ ] Tested with a real subscription
- [ ] Tested cancellation flow
- [ ] Error handling looks good

<Note>
If something isn't working, check the [common errors](/docs/troubleshooting/common-errors) page.
</Note>
