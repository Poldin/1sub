---
title: "Vendor Integration"
description: "Integrate 1Sub in under an hour - simpler than building your own paywall"
---

# Vendor Integration

1Sub handles subscriptions and payments for you. When a user clicks "Launch Magic Login" on 1Sub, they arrive at your app already signed in. Zero passwords, zero friction.

---

## What you need to get started

Two endpoints:

1. <a href="#step-1-webhook-endpoint" className="inline-block px-2 py-1 bg-[#3ecf8e]/20 text-[#3ecf8e] rounded text-sm font-medium hover:bg-[#3ecf8e]/30 transition-colors">**Webhook endpoint**</a> - receive user data and subscription updates
2. <a href="#step-2-magic-login-endpoint" className="inline-block px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-sm font-medium hover:bg-purple-500/30 transition-colors">**Magic Login endpoint**</a> - authenticate users with zero API calls

That's it. This replaces:
- User signup and login
- Password management
- Subscription logic
- Billing integration
- Payment processing

---

## The User Experience

From the user's perspective:

1. User subscribes to your tool on 1Sub
2. User clicks "Launch Magic Login"
3. Your app opens with the user already signed in
4. They use your tool - no account creation needed

Users never create accounts on your site. 1Sub handles identity and payment.

---

## Step-by-Step Integration

### Step 1: Webhook Endpoint

When a user subscribes, cancels, or updates, 1Sub sends you a webhook:

```typescript
app.post('/webhooks/1sub', express.json(), (req, res) => {
  const event = req.body;

  switch (event.type) {
    case 'subscription.activated':
      // New subscriber! Store their data
      db.users.upsert({
        oneSubUserId: event.data.oneSubUserId,
        email: event.data.userEmail,
        plan: event.data.planId,
        active: true
      });
      break;
      
    case 'subscription.canceled':
      // Subscription ended - revoke access
      db.users.update(event.data.oneSubUserId, { active: false });
      sessions.invalidate(event.data.oneSubUserId);
      break;
  }

  res.status(200).send('OK');
});
```

<Info>
Configure your Webhook URL in the [Vendor Dashboard](/vendor-dashboard/api).
</Info>

---

### Step 2: Magic Login Endpoint

When users click "Launch Magic Login", they're redirected to your Magic Login URL with a signed token. **No API calls needed** - verify the signature locally:

```typescript
import crypto from 'crypto';

app.get('/auth/magic', async (req, res) => {
  const { user, ts, sig } = req.query;
  
  // 1. Verify link hasn't expired (60 seconds)
  if (Date.now() / 1000 - Number(ts) > 60) {
    return res.status(401).send('Link expired');
  }
  
  // 2. Verify signature (LOCAL - no API call!)
  const expected = crypto
    .createHmac('sha256', process.env.MAGIC_LOGIN_SECRET)
    .update(`${user}${ts}`)
    .digest('hex');
    
  if (sig !== expected) {
    return res.status(401).send('Invalid signature');
  }
  
  // 3. Look up user (you already have their data from webhooks!)
  const userData = await db.users.findByOneSubId(user);
  if (!userData?.active) {
    return res.status(403).send('No active subscription');
  }
  
  // 4. Create session - they're in!
  req.session.userId = user;
  req.session.plan = userData.plan;
  
  res.redirect('/dashboard');
});
```

<Info>
Configure your Magic Login URL and generate a Magic Login Secret in the [Vendor Dashboard](/vendor-dashboard/api).
</Info>

---

## That's It! ðŸŽ‰

**~30 lines of code** for complete subscription management:

| What | How |
|------|-----|
| User subscribes | Webhook â†’ store in your DB |
| User launches tool | Magic Login â†’ verify signature â†’ create session |
| User cancels | Webhook â†’ revoke access |

**Zero API calls** for authentication. Everything is verified locally.

---

## Common Questions

**What happens if a user cancels?**

You get a `subscription.canceled` webhook immediately. Invalidate their session and they lose access.

**What if the webhook arrives late?**

Extremely rare. But if a user launches before their webhook arrives, they won't be in your database yet. Just show a "try again in a few seconds" message.

**Do I need to call any 1Sub API?**

Only if your tool uses credits (`/api/v1/credits/consume`). Authentication is fully local via Magic Login.

---

## Ready to Integrate?

- **Time to integrate:** 30-60 minutes
- **Lines of code:** ~30
- **API calls needed:** Zero (for auth)

Get started in the [Vendor Dashboard](/vendor-dashboard/api).

<CardGroup cols={2}>
<Card title="Magic Login" icon="sparkles" href="/docs/api/magic-login">
  Full Magic Login documentation
</Card>

<Card title="Webhook Events" icon="webhook" href="/docs/webhooks/events">
  All event types and payloads
</Card>
</CardGroup>
