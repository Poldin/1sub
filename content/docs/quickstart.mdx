---
title: "Vendor Integration"
description: "Integrate 1Sub in under an hour - simpler than building your own paywall"
---

# Vendor Integration

1Sub handles subscriptions and payments for you. When a user clicks "Launch Tool" on 1Sub, we tell you whether access is allowed. You just need to receive that signal and create a session.

---

## What You Need to Build

Just three things:

1. **One callback endpoint** - receives users after they click "Launch Tool"
2. **One access check** - verifies the user still has access (every 5 minutes)
3. **One webhook endpoint** - so access stops immediately when payment stops

That's it. This replaces:
- User signup and login
- Password management
- Subscription logic
- Billing integration
- Payment processing

---

## The User Experience

From the user's perspective:

1. User subscribes to your tool on 1Sub
2. User clicks "Launch Tool"
3. Your app opens with the user already signed in
4. They use your tool - no account creation needed

Users never create accounts on your site. 1Sub handles identity and payment.

---

## Step-by-Step Integration

### Step 1: Add the Callback Endpoint

When users click "Launch Tool", they're redirected to your app with a `code`. Exchange it for user info:

```typescript
app.get('/auth/callback', async (req, res) => {
  const { code } = req.query;

  const { data } = await fetch('https://1sub.io/api/v1/authorize/exchange', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.ONESUB_API_KEY}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ code }),
  }).then(r => r.json());

  // Create your session
  req.session.userId = data.onesubUserId;
  req.session.token = data.verificationToken;
  req.session.plan = data.entitlements;

  res.redirect('/dashboard');
});
```

You get back the user's ID, their plan details, and a token for checking access later.

---

### Step 2: Protect Your Paid Routes

Check access before serving premium features. Do this every 5 minutes:

```typescript
async function checkAccess(req, res, next) {
  const lastCheck = req.session.lastCheck || 0;
  const fiveMinutes = 5 * 60 * 1000;

  if (Date.now() - lastCheck < fiveMinutes) return next();

  const { data } = await fetch('https://1sub.io/api/v1/verify', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.ONESUB_API_KEY}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ verificationToken: req.session.token }),
  }).then(r => r.json());

  if (!data.valid) {
    req.session.destroy();
    return res.redirect('/?error=subscription_ended');
  }

  req.session.token = data.verificationToken;
  req.session.lastCheck = Date.now();
  next();
}

app.use('/dashboard', checkAccess);
```

---

### Step 3: Add the Webhook Endpoint

When a user cancels, 1Sub notifies you immediately so you can end their session:

```typescript
app.post('/webhooks/1sub', express.json(), (req, res) => {
  const event = req.body;

  if (event.type === 'subscription.canceled') {
    // Invalidate this user's session
    sessionStore.destroy(event.data.oneSubUserId);
  }

  res.status(200).send('OK');
});
```

That's the complete integration.

---

## What You Do Not Need to Build

- User accounts
- Password management
- Email verification
- Login forms
- Subscription management
- Payment processing
- Billing UI
- Refund handling
- Plan upgrades/downgrades

1Sub handles all of this.

---

## Common Questions

**What happens if a user cancels?**

You get a webhook immediately. Their next access check will also fail. Either way, access stops within 5 minutes.

**What if 1Sub is temporarily unavailable?**

Keep the session active. The 5-minute window gives time for brief outages. If verification fails repeatedly, end the session gracefully.

**Can I cache results?**

Yes. The access check response includes a `cacheUntil` timestamp. You can trust cached data until then.

---

## Ready to Integrate?

- **Time to integrate:** 30-60 minutes
- **Lines of code:** ~40
- **Complexity:** If you can add a webhook, you can integrate 1Sub

Get your API key from the [vendor dashboard](https://1sub.io/vendor/dashboard) and you're ready to go.

<CardGroup cols={2}>
<Card title="API Reference" icon="code" href="/docs/api/reference">
  Full endpoint documentation
</Card>

<Card title="Webhook Events" icon="webhook" href="/docs/webhooks/events">
  All event types and payloads
</Card>
</CardGroup>
